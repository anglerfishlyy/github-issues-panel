/* [create-plugin] version: 5.25.8 */
define(["@grafana/ui","@grafana/data","react"],(e,t,a)=>(()=>{"use strict";var r={7:t=>{t.exports=e},781:e=>{e.exports=t},959:e=>{e.exports=a}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,l),a.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};l.r(o),l.d(o,{plugin:()=>c});var i=l(959),s=l.n(i),d=l(781),u=l(7);function p(e,t,a,r,n,l,o){try{var i=e[l](o),s=i.value}catch(e){return void a(e)}i.done?t(s):Promise.resolve(s).then(r,n)}const c=new d.PanelPlugin(({options:e,height:t})=>{const[a,r]=(0,i.useState)(null),[n,l]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const{owner:t,repo:a,state:n,labels:o,perPage:i}=e;if(!t||!a)return r(null),l(null),void d(!1);const s=new URLSearchParams;s.set("state",n||"open"),o&&s.set("labels",o),s.set("per_page",String(i||10)),d(!0),l(null),fetch(`https://api.github.com/repos/${t}/${a}/issues?${s.toString()}`,{headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"}}).then(e=>{return(t=function*(){if(!e.ok)throw new Error(`GitHub API ${e.status}: ${yield e.text()}`);return e.json()},function(){var e=this,a=arguments;return new Promise(function(r,n){var l=t.apply(e,a);function o(e){p(l,r,n,o,i,"next",e)}function i(e){p(l,r,n,o,i,"throw",e)}o(void 0)})})();var t}).then(e=>{r(e.filter(e=>!e.pull_request))}).catch(e=>l(e.message)).finally(()=>d(!1))},[e,e.owner,e.repo,e.state,e.labels,e.perPage]),e.owner&&e.repo?o?s().createElement("div",{style:{padding:12}},s().createElement(u.Spinner,null)):n?s().createElement("div",{style:{padding:12,color:"var(--error-text)"}},"Error: ",n):(null==a?void 0:a.length)?s().createElement("div",{style:{padding:12,overflowY:"auto",height:t}},a.map(e=>{var t;return s().createElement("div",{key:e.id,style:{marginBottom:10,border:"1px solid var(--border-weak)",borderRadius:8,padding:8}},s().createElement("div",{style:{fontWeight:600}},"#",e.number," · ",e.title),s().createElement("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:4}},null===(t=e.labels)||void 0===t?void 0:t.map(e=>s().createElement(u.Badge,{key:e.name,text:e.name,color:"blue"}))),s().createElement("div",{style:{marginTop:4,fontSize:12}},s().createElement("a",{href:e.html_url,target:"_blank",rel:"noreferrer"},"Open on GitHub")," · ","Updated ",new Date(e.updated_at).toLocaleString()))})):s().createElement("div",{style:{padding:12}},"No issues found."):s().createElement("div",{style:{padding:12}},"Set ",s().createElement("b",null,"Owner")," and ",s().createElement("b",null,"Repository")," in panel options.")}).setPanelOptions(e=>e.addTextInput({path:"owner",name:"Owner/Org",description:"e.g. grafana",defaultValue:"grafana"}).addTextInput({path:"repo",name:"Repository",description:"e.g. grafana",defaultValue:"grafana"}).addRadio({path:"state",name:"Issue state",defaultValue:"open",settings:{options:[{value:"open",label:"Open"},{value:"closed",label:"Closed"},{value:"all",label:"All"}]}}).addTextInput({path:"labels",name:"Labels (comma-separated)",defaultValue:""}).addNumberInput({path:"perPage",name:"Max items",defaultValue:10,settings:{min:1,max:50,integer:!0}}));return o})());
//# sourceMappingURL=module.js.map